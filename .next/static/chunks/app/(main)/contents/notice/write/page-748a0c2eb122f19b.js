(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7175],{971:(e,t,r)=>{Promise.resolve().then(r.bind(r,4799))},4799:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var a=r(5155),s=r(2115),n=r(5695),l=r(5109),o=r(8292),c=r(1891);function d(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)(""),[d,i]=(0,s.useState)(""),p=(0,l.hG)({extensions:[o.A,c.Ay],content:"",editorProps:{attributes:{class:"prose max-w-none focus:outline-none min-h-[400px] px-4 py-3"}},onUpdate:e=>{let{editor:t}=e;i(t.getHTML())}}),u=(0,s.useCallback)(async e=>{var t,r;e.preventDefault();let a=null==(r=e.dataTransfer)||null==(t=r.files)?void 0:t[0];if(!a||!a.type.startsWith("image/"))return;let s=new FormData;s.append("file",a);try{let e=await fetch("".concat("https://port-0-interflowerapi-m8majoul75b3ab86.sel4.cloudtype.app","/api/upload"),{method:"POST",body:s}),t=(await e.json()).url;null==p||p.chain().focus().setImage({src:t}).run()}catch(e){console.error("이미지 업로드 실패:",e)}},[p]);(0,s.useEffect)(()=>{if(!p)return;let e=document.querySelector(".tiptap");if(e)return e.addEventListener("drop",u),()=>{e.removeEventListener("drop",u)}},[p,u]);let b=async a=>{if(a.preventDefault(),!t.trim())return void alert("제목을 입력해주세요.");let s=new FormData;s.append("title",t),s.append("content",d);try{if(!(await fetch("".concat("https://port-0-interflowerapi-m8majoul75b3ab86.sel4.cloudtype.app","/notice_add"),{method:"POST",body:s})).ok)throw Error("업로드 실패");alert("게시글이 등록되었습니다!"),r(""),i(""),null==p||p.commands.setContent(""),e.push("/contents/notice")}catch(e){console.error("게시글 업로드 실패:",e),alert("업로드 중 문제가 발생했습니다.")}};return(0,a.jsx)("div",{className:"min-h-screen bg-white px-4 md:px-6 pt-28 pb-10",children:(0,a.jsxs)("form",{onSubmit:b,className:"max-w-4xl mx-auto border border-gray-200 bg-white rounded",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4",children:(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"공지사항"})}),(0,a.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"제목"}),(0,a.jsx)("input",{type:"text",placeholder:"제목을 입력하세요",value:t,onChange:e=>r(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"})]}),(0,a.jsxs)("div",{className:"px-6 py-4 tiptap",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"내용"}),(0,a.jsx)("div",{className:"border border-gray-300 rounded",children:(0,a.jsx)(l.$Z,{editor:p})}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"※ 이미지는 드래그 앤 드롭으로도 추가할 수 있어요."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t bg-gray-50",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-100",children:"취소"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#E34798] text-white rounded",children:"등록"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5004,277,2980,8441,1684,7358],()=>t(971)),_N_E=e.O()}]);